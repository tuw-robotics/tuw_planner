##enable named panes in tmux.conf with:
#set -g pane-border-format "#{pane_index} #{pane_title}"
#set -g pane-border-status bottom

name: graph_planner
#root: /home/markus/projects/tuw-ros

windows:
  - robot:
      panes: 
        - stage: 
          - printf '\033]2;%s\033\\' 'stage'
          - ros2 launch stage_ros2 stage.launch.py world:=straden
        - robot description: 
          - printf '\033]2;%s\033\\' 'robot description'
          - ros2 launch tuw_gazebo_models robot_description.launch.py model_name:=robot0  robot:=pioneer3dx
        - laser filter: 
          - printf '\033]2;%s\033\\' 'laser filter'
          - ros2 launch tuw_nav2 laser_filter_launch.py use_sim_time:=true filter_yaml:=shadow_filter_stage.yaml scan_src:=base_scan
        - rviz: 
          - printf '\033]2;%s\033\\' 'rviz'
          - ros2 launch tuw_nav2 rviz_launch.py use_sim_time:=true config:=nav2_graph
  - maps:
      panes: 
        - object_map_server: 
          - printf '\033]2;%s\033\\' 'object_map_server'
          - ros2 run tuw_objects_server objects_server_node --ros-args  -p pub_interval:=0 -r objects:=objects_server/objects -r get_objects:=objects_server/get_objects -p objects_json:=./ws02/src/tuw_greenhive/config/object_map/starden-2024-01-14.json
        - object_map: 
          - printf '\033]2;%s\033\\' 'object_map'
          - ros2 run tuw_object_map object_map_node --ros-args -p pub_interval:=10 -p publish_tf:=true -p map_border:=5.0 -r get_objects:=objects_server/get_objects -r get_map:=map_server/get_map  -r map:=map -r objects:=objects_server/objects
  - graph:
      panes: 
        - graph_voronoi: 
          - printf '\033]2;%s\033\\' 'graph_voronoi'
          - ros2 run tuw_graph_generator graph_voronoi_node --ros-args -r get_map:=map_server/map
        - graph_split: 
          - printf '\033]2;%s\033\\' 'graph_split'
          - ros2 run tuw_graph_generator graph_split_node --ros-args  -r graph_split:=graph_split -p threshold_ending:=1.5 -p scale_crossing:=2.0 -p threshold_cut:=1.0
        - graph_vineyard: 
          - printf '\033]2;%s\033\\' 'graph_vineyard'
          - ros2 run tuw_graph_generator graph_vineyard_node --ros-args -r objects:=objects_on_map -r graph_vineyard:=graph_vineyard
        - graph_freespace: 
          - printf '\033]2;%s\033\\' 'graph_freespace'
          - ros2 run tuw_graph_generator graph_freespace_node --ros-args -p pub_interval:=10 -p timeout_service_call:=10 -r graph:=graph_vineyard -r publish_graph:=publish_graph_vineyard
  - nav:
      panes: 
        - localization: 
          - printf '\033]2;%s\033\\' 'localization'
          - ros2 launch tuw_nav2 fake_localization_launch.py use_sim_time:=true init_pose_yaml:=init_pose_straden.yaml vehilce:=pioneer3dx
          #- ros2 launch tuw_nav2 localization_launch.py      use_sim_time:=true init_pose_yaml:=init_pose_straden.yaml vehilce:=pioneer3dx
        - nav2-empty: 
          - printf '\033]2;%s\033\\' 'nav2-empty'
          - ros2 launch tuw_nav2 nav2_minimal_launch.py planner_server_yaml:=empty controller_server_yaml:=empty
        - nav2-controller_server: 
          - printf '\033]2;%s\033\\' 'controller'
          - ros2 run nav2_controller controller_server --ros-args --params-file ws02/src/tuw_planner/tuw_planner_graph/config/nav2/controller_mppi.yaml  -r graph:=graph_vineyard  -r map:=map_freespace
        - planner-planner_server: 
          - printf '\033]2;%s\033\\' 'planner'
          - ros2 run nav2_planner planner_server --ros-args --params-file ws02/src/tuw_planner/tuw_planner_graph/config/nav2/planner_graph.yaml  -r graph:=graph_vineyard  -r map:=map_freespace